<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

  <?xml version="1.0" encoding="utf-8"?>
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

  <head>
    <title>Mdk-Memo</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="generator" content="ruby template engine" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet"
          href="/css/sitemap.css"
          type="text/css"/>
    <script type="text/javascript"
	    src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" 
            src="/js/index.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107284492-2"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());

     gtag('config', 'UA-107284492-2');
    </script> 
    
  </head>
  
  <body>
    <HEADER>
      <H1 class="title"> <a class="title" href="/"> Mdk-Memo </a>
	<nav>
	  <ul>
	    <li class="menu" id="menu-articles"><a href="/works">WORKS</a></li>
	    <li class="menu"><a href="/diary">DIARY</a></li>
	    <li class="menu" id="menu-aboutme"><a href="/about">ABOUT</a></li>
	    
	  </ul>
	</nav>
      </H1>
    </HEADER>
    <article id="main-article">
      <div id="url" style="display:none;">https://medaka.github.io//diary/2018/11.html</div>
      <h2 id="0">日記スクリプト更新</h2>
<span class="timestamp">[2018-11-19 Mon]</span>
<p>また日記スクリプトを変更した。</p>
<p>前にも書いたかもしれないけど、ここの日記は <code>org-mode</code>
  でスタティックに生成している。
  <code>org-mode</code> で下書きして、それを <code>ruby</code> にくわせ、
  <code>erb</code> で整形するという単純なrubyスクリプトだったんだけど、
  全くリファクタリングしていなかったから、
  自分が書いたコードが全く読めなくなっている、というね。</p>
<p>いくら自分用のスクリプトとはいえ、
  やっぱりリファクタリングは大事だということを実感した..</p>
<p>こんなコードでも公開すれば何かしらの価値になるのかもしれないけど、
  僕の環境べったりだからなあ。。</p>
<h2 id="1">NTT続々</h2>
<span class="timestamp">[2018-11-27 Tue]</span>
<p>NTTから出ていく人のポストが話題になっているっぽい</p>
<p><a href="http://kumagi.hatenablog.com/entry/exit-from-ntt">6年勤めたNTTを退職しました | Software Transactional Memo</a></p>
<p><a href="https://satoshi.blogs.com/life/2018/11/ntt.html">NTTの株価総額が世界一だった時に、Microsoftに転職した理由 | Life is
  beutiful</a></p>
<p>大したことはあまり言えないが、まあ、NTTも羨ましい環境であるなあと
  思うばかりで。
  特にkumagi氏のエントリにはオフィスの風景の写真が写っているけれども
  うちのオフィスの倍はある感じだ。
  あまり国内最高峰の研究所と比べてもいけないのかもしれないけど..</p>
<p>うちのオフィスはSIerの典型的なそれといえる。
  SIerの開発もそれなりの知的労働が必要だとは思うんだけど
  全く環境に配慮される気配がない。
  環境というのは、オフィス環境のみならず
  開発環境というロジカルなものも指している。</p>
<p>そういう意味では件の記事の「社内環境の絶望」という指摘は
  わりと的を射ていると言えるんだけど..
  ここまでくると、彼らの関心と我々のレベルが違いすぎて、
  問題意識として上がってくることがなくなってくるかもしれない。</p>
<p>少なくとも彼らより環境面で劣悪な労働をしている我々だが、
  あまりそれを理由に転職というのは聞いたことがない。</p>
<p>あってもあまり内部の人間には言わないのかもね..
  仮にそうだとしたら、改善するきっかけは永遠にこないままだ。</p>
<h2 id="2">PWAにおける manifest.json</h2>
<span class="timestamp">[2018-11-28 Wed]</span>
<p>最近PWA（Progressive Web Application）について嗅ぎ回っている。</p>
<p>PWA自体はGoogleの記事が非常に参考になる。</p>
<p><a href="https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/?hl%3Dja">はじめてのプログレッシブ ウェブアプリ | Web Fundamentals</a></p>
<p>PWAを実装するときにはいろいろ手順があるんだけど、
  ランチャーアイコンを設定したり、Webアプリのタイトル等
  のメタ情報を与えるときには <code>manigest.json</code>
  を設置してやる必要がある。</p>
<p><a href="https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/?hl%3Dja">ウェブアプリ マニフェスト | Web Fundamentals</a></p>
<p>とくにこの中で <code>start_url</code> を動的に変更したい、
  ということがあった
  （精算ちゃんでは部屋ごとにURLというか、エントリーポイントが異なるため、
  ここを動的に変更したいのだ）。
  これがなかなか探してもみつからない。</p>
<p>結果的に参考になったのは以下記事のみだった。</p>
<p><a href="https://medium.com/@alshakero/how-to-setup-your-web-app-manifest-dynamically-using-javascript-f7fbee899a61">How to Setup Your Web App Manifest Dynamically Using Javascript</a></p>
<p>要するに <code>manifest.json</code> に相当するjsonを作ってやり、
  それを <code>link</code> 要素に割り当ててやるもののようだ。
  正直力技のような気がする。
  特に設定値をプログラム側で持ってしまうのが微妙に良くない気がするのだ。</p>
<p>他の方法として、 <code>start_url</code> を静的に決定し、
  その後リダイレクトする手段も考えられる。
  しかし、この場合、PWAの設計的にキャッシュがうまくいかないようだ。</p>
<p><a href="https://developers.google.com/web/tools/lighthouse/audits/cache-contains-start_url?hl%3Dja">キャッシュにマニフェストの start_url を保持する | Tools for Web
  Developers</a></p>
<p>そんなわけで、 <code>start_url</code> なり他の要素なりを
  あまり動的に変えてやるのはあまり良くない気がしてきた..</p>
<p>まだもうちょっと思案してみよう。</p>
    </article>
    
    
    <footer>
      <nav class="footer">
	<p class="copyright">Copyright 2018</p>
      </nav>
    </footer>
  </body>
</html>

